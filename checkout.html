<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AFG Mart</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/style2.css" />
    <link rel="icon" href="img/AFGMart- logo.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">

  </head>
  <!-- start check out -->
  <body>
     <!--Navbar Start-->
     <nav class="navbar navbar-expand-lg bg-light">
      <div class="container-fluid bg-light">
        <!-- Logo -->
        <a class="navbar-brand" href="index.html">
          <img
            src="img/AFGMart- logo.png"
            alt="AFG Mart"
            style="width: 60px; height: 60px"
          />
        </a>
        <!-- Navbar Links -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="All-Products.html">All Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="AboutUs.html">About Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="ContactUs.html">Contact</a>
            </li>
          </ul>

          <!-- Icons -->
          <div class="d-flex m-3 me-0">
            <button
              class="btn-search btn border border-primary btn-outline-success btn-md-square rounded-circle bg-white me-4"
              style="border-color: #f7931e"
              data-bs-toggle="modal"
              data-bs-target="#searchModal"
            >
              <i class="fas fa-search" style="color: #f7931e"></i>
            </button>
            <a href="ShoppingCart.html" class="position-relative me-4 my-auto">
              <i
                class="fas fa-cart-shopping"
                style="color: #f7931e; scale: 1.5"
              ></i>
              <span
                class="position-absolute badge text-bg-primary rounded-circle d-flex align-items-center justify-content-center text-white"
                style="
                  top: -5px;
                  left: 15px;
                  height: 15px;
                  min-width: 15px;
                  width: 15px;
                "
                >3</span
              >
            </a>
            <a href="login-register-forms.html" class="my-auto">
              <i
                class="fas fa-user fa-2x"
                style="color: #f7931e; scale: 0.9"
              ></i>
            </a>
          </div>
        </div>
      </div>
    </nav>
    <!-- Navbar End -->
    <!-- Modal Search Start -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-fullscreen">
      <div class="modal-content rounded-0">
          <div class="modal-header">
              <button type="button" class="btn-close " data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body d-flex flex-column align-items-center">
              <div class="input-group w-75 mx-auto d-flex">
                  <span id="search-icon" class="input-group-text">
                      <!-- Dropdown Menu for Category -->
                      <div class="dropdown">
                          <button class="btn dropdown-toggle" type="button" id="categoryButton" data-bs-toggle="dropdown" aria-expanded="false">
                              Category
                          </button>
                          <ul class="dropdown-menu" aria-labelledby="categoryButton">
                              <li><a class="dropdown-item" href="#" data-category="clothes">Clothes</a></li>
                              <li><a class="dropdown-item" href="#" data-category="jewelry">Jewelry</a></li>
                              <li><a class="dropdown-item" href="#" data-category="shoes">Shoes</a></li>
                              <li><a class="dropdown-item" href="#" data-category="bags">Bags</a></li>
                          </ul>
                      </div>
                  </span>
                  <input type="search" class="form-control" placeholder="Search" id="searchInput" aria-describedby="search-icon-1">
                  <span id="search-icon" class="input-group-text model-search-icon p-3"><i class="fa fa-search" style="color: white;"></i></span>
              </div>

              <!-- Search Results (Cards will be inserted here) -->
              <div class="container  w-75 mt-4" id="searchResults">
              
                  <!-- Cards will appear here dynamically -->
              </div>
          </div>
      </div>
  </div>
</div>
<!-- Modal Search End -->

    <!-- Shopping Cart Start -->

    <main>
      <div class="mb-2">
        <h1 class="text-center" style="font-family: poppins; margin-top: 70px">
          Check Out
        </h1>
      </div>
      <div class="container-fluid mb-3">
        <div class="row">
          <!-- Main Content -->
          <div class="container-fluid col-lg-10">
            <div class="row"></div>
            <!-- Top Selling Products Table -->
            <div class="row justify-content-center">
              <div class="col-md-10 table-responsive table-products mt-5 p-0">
                <div
                  class="d-flex table-head-content table-title"
                  style="width: 100%"
                >
                 Your Order List
                  <a href="customer-information.html"> </a>
                </div>
                <div class="table-responsive">
                  <table class="table table-hover mb-0 table-responsive">
                    <thead class="thead-light ">
                                <tr>
                                    <th scope="col">Product Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody class="products-list">
                                
                            </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid text-center d-flex justify-content-between align-items-center mb-3" style="max-width: 68%; margin: 0 auto;">
        <a href="payment.html" class=" shopping-card-btn btn btn-primary p-2 mb-4" style="width: 150px;">
          Payment
        </a>
        
        <p class=" p-1 mb-4 ms-5 mt-0 ">
          Total: <span class="total_list">0</span> AF
        </p>
        
      </div>
    </main>

    <!-- Footer Start -->
    <footer>
      <div class="container-fluid pt-4 footer-info">
        <div class="row">
          <div class="col-lg-5 col-md-6 footer-logo">
            <img
              src="img/AFGMart- logo.png"
              alt=""
              width="150px"
              height="150px"
            />
            <div class="social-icons mt-1 mb-2 p-2 btn-social footer-logo">
              <a class="" href="#"
                ><i class="fab fa-facebook-f" style="color: #f2f2f2"></i
              ></a>
              <a class="" href="#"
                ><i class="fab fa-instagram" style="color: #f2f2f2"></i
              ></a>
              <a class="" href="#"
                ><i class="fab fa-twitter" style="color: #f2f2f2"></i
              ></a>
            </div>
          </div>

          <div class="col-lg-4 col-md-6">
            <h4 class="font-weight-semi-bold mb-4" style="color: #f7931e">
              Get in Touch
            </h4>
            <p>
              <i class="fa fa-map-marker-alt mr-2" style="color: #f2f2f2"></i>
              Herat, Mahtab Street
            </p>
            <p>
              <i class="fa fa-phone-alt mr-2" style="color: #f2f2f2"></i>
              009379999999
            </p>
            <p>
              <i class="fa fa-envelope mr-2" style="color: #f2f2f2"></i>
              afgmart@gmail.com
            </p>
          </div>

          <div class="col-lg-3 col-md-6">
            <h4 class="font-weight-semi-bold mb-4" style="color: #f7931e">
              Quick Links
            </h4>
            <div class="d-flex flex-column quick-links justify-content-start">
              <a class="text-white mb-2" href="index.html">
                <i class="fa fa-angle-right m-1" style="color: #f2f2f2"></i
                >Home</a
              >
              <a class="text-white mb-2" href="All-Products.html">
                <i class="fa fa-angle-right m-1" style="color: #f2f2f2"></i>All
                Products
              </a>
              <a class="text-white mb-2" href="AboutUs.html">
                <i class="fa fa-angle-right m-1" style="color: #f2f2f2"></i
                >About Us
              </a>
              <a class="text-white mb-2" href="ContactUs.html">
                <i class="fa fa-angle-right m-1" style="color: #f2f2f2"></i
                >Contact
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center text-md-left footer">
        <b class="m-0 text-dark">Copyright &copy; 2024 AFG Mart</b>
      </div>
    </footer>
    <!-- Footer End -->
  
    <script>
    document.addEventListener("DOMContentLoaded", function () {
    const totalListElement = document.querySelector(".total_list");
    const productContainer = document.querySelector(".products-list");

    // Retrieve the product list from localStorage (for name, price, image)
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    let totalAmountForAllProducts = 0;  // To calculate the total of all products
    if (cart.length === 0) {
        console.log("No products in the cart");
        return;
    }



    cart.forEach((product) => {
        // Calculate the total amount for the product
        const totalAmount = product.price * product.quantity;

        // Add the total amount of this product to the total amount of all products
       totalAmountForAllProducts += totalAmount;

        // Create the product row and insert it into the table
        const productRow = `
            <tr>
                <td><img src="${product.img}" alt="${product.name}" style="width: 50px; height: 50px;"> ${product.name}</td>
                <td>${product.price} AF</td>
                <td>${product.quantity}</td>
                <td>${totalAmount} AF</td>
                <td class="table-action">
                    <a href="#" onclick="deleteProduct('${product.name}')"><i class="fas fa-trash text-danger"></i> </a>
                </td>
            </tr>
        `;

        productContainer.insertAdjacentHTML("beforeend", productRow);
    });

      // Display the total amount in the span with the class 'total_list'
      totalListElement.textContent = totalAmountForAllProducts;
});

function deleteProduct(productName) {
    // Retrieve the cart from localStorage
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
    // Filter out the product to delete
    cart = cart.filter(product => product.name !== productName);
    
    // Save the updated cart back to localStorage
    localStorage.setItem("cart", JSON.stringify(cart));

    // Reload the page to reflect the changes
    window.location.reload();
}
    </script>
        <script src="js/search.js"></script>

  </body>
</html>
